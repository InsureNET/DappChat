{"ast":null,"code":"var _jsxFileName = \"/Users/AlexMok/Twittor/App/src/TweetForm.js\";\nimport { drizzleConnect } from 'drizzle-react';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst translateType = type => {\n  switch (true) {\n    case /^uint/.test(type):\n      return 'number';\n\n    case /^string/.test(type) || /^bytes/.test(type):\n      return 'text';\n\n    case /^bool/.test(type):\n      return 'checkbox';\n\n    default:\n      return 'text';\n  }\n};\n\nclass TweetForm extends Component {\n  constructor(props, context) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.contracts = context.drizzle.contracts;\n    this.utils = context.drizzle.web3.utils; // Get the contract ABI\n\n    const abi = this.contracts[this.props.contract].abi;\n    this.inputs = [];\n    var initialState = {}; // Iterate over abi for correct function.\n\n    for (var i = 0; i < abi.length; i++) {\n      if (abi[i].name === this.props.method) {\n        this.inputs = abi[i].inputs;\n\n        for (var j = 0; j < this.inputs.length; j++) {\n          initialState[this.inputs[j].name] = '';\n        }\n\n        break;\n      }\n    }\n\n    this.state = initialState;\n  }\n\n  findHashTag(str) {\n    this.setState({\n      hashT: str.split(' ').filter(word => {\n        return word[0] === '#';\n      })[0]\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    this.findHashTag(this.state.tweet); // console.log('state', this.state);\n\n    const convertedInputs = this.inputs.map(input => {\n      if (input.type === 'bytes32') {\n        return this.utils.toHex(this.state[input.name]);\n      }\n\n      console.log(this.state[input.name], 'INPUT NAME');\n      return this.state[input.name];\n    });\n\n    if (this.props.sendArgs) {\n      return this.contracts[this.props.contract].methods[this.props.method].cacheSend(...convertedInputs, this.props.sendArgs);\n    }\n\n    return this.contracts[this.props.contract].methods[this.props.method].cacheSend(...convertedInputs);\n  }\n\n  handleInputChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    if (this.props.render) {\n      return this.props.render({\n        inputs: this.inputs,\n        inputTypes: this.inputs.map(input => translateType(input.type)),\n        state: this.state,\n        handleInputChange: this.handleInputChange,\n        handleSubmit: this.handleSubmit\n      });\n    } // this.inputs.length = 1\n\n\n    return React.createElement(\"form\", {\n      className: \"pure-form pure-form-stacked\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.inputs.map((input, index) => {\n      var inputType = translateType(input.type);\n      var inputLabel = this.props.labels ? this.props.labels[index] : input.name; // check if input type is struct and if so loop out struct fields as well\n\n      let hideClass = ''; // if(index === 1) {\n      //   hideClass = \"hide\";\n      // }\n\n      return React.createElement(\"input\", {\n        className: hideClass,\n        key: input.name,\n        type: inputType,\n        name: input.name,\n        value: this.state[input.name],\n        placeholder: inputLabel,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      });\n    }), React.createElement(\"button\", {\n      key: \"submit\",\n      className: \"pure-button\",\n      type: \"button\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"TWEET\"));\n  }\n\n}\n\nTweetForm.contextTypes = {\n  drizzle: PropTypes.object\n};\nTweetForm.propTypes = {\n  contract: PropTypes.string.isRequired,\n  method: PropTypes.string.isRequired,\n  sendArgs: PropTypes.object,\n  labels: PropTypes.arrayOf(PropTypes.string),\n  render: PropTypes.func\n};\n/*\n * Export connected component.\n */\n\nconst mapStateToProps = state => {\n  return {\n    contracts: state.contracts\n  };\n};\n\nexport default drizzleConnect(TweetForm, mapStateToProps);","map":{"version":3,"sources":["/Users/AlexMok/Twittor/App/src/TweetForm.js"],"names":["drizzleConnect","React","Component","PropTypes","translateType","type","test","TweetForm","constructor","props","context","handleInputChange","bind","handleSubmit","contracts","drizzle","utils","web3","abi","contract","inputs","initialState","i","length","name","method","j","state","findHashTag","str","setState","hashT","split","filter","word","event","preventDefault","tweet","convertedInputs","map","input","toHex","console","log","sendArgs","methods","cacheSend","target","value","render","inputTypes","index","inputType","inputLabel","labels","hideClass","contextTypes","object","propTypes","string","isRequired","arrayOf","func","mapStateToProps"],"mappings":"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","sourcesContent":["import { drizzleConnect } from 'drizzle-react';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nconst translateType = type => {\n  switch (true) {\n    case /^uint/.test(type):\n      return 'number';\n    case /^string/.test(type) || /^bytes/.test(type):\n      return 'text';\n    case /^bool/.test(type):\n      return 'checkbox';\n    default:\n      return 'text';\n  }\n};\n\nclass TweetForm extends Component {\n  constructor(props, context) {\n    super(props);\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n\n    this.contracts = context.drizzle.contracts;\n    this.utils = context.drizzle.web3.utils;\n\n    // Get the contract ABI\n    const abi = this.contracts[this.props.contract].abi;\n\n    this.inputs = [];\n    var initialState = {};\n\n    // Iterate over abi for correct function.\n    for (var i = 0; i < abi.length; i++) {\n      if (abi[i].name === this.props.method) {\n        this.inputs = abi[i].inputs;\n\n        for (var j = 0; j < this.inputs.length; j++) {\n          initialState[this.inputs[j].name] = '';\n        }\n\n        break;\n      }\n    }\n\n    this.state = initialState;\n  }\n\n  findHashTag(str) {\n    this.setState({\n      hashT: str.split(' ').filter(word => {\n        return word[0] === '#';\n      })[0],\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    this.findHashTag(this.state.tweet);\n\n    // console.log('state', this.state);\n\n    const convertedInputs = this.inputs.map(input => {\n      if (input.type === 'bytes32') {\n        return this.utils.toHex(this.state[input.name]);\n      }\n      console.log(this.state[input.name], 'INPUT NAME');\n      return this.state[input.name];\n    });\n\n    if (this.props.sendArgs) {\n      return this.contracts[this.props.contract].methods[\n        this.props.method\n      ].cacheSend(...convertedInputs, this.props.sendArgs);\n    }\n\n    return this.contracts[this.props.contract].methods[\n      this.props.method\n    ].cacheSend(...convertedInputs);\n  }\n\n  handleInputChange(event) {\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  render() {\n    if (this.props.render) {\n      return this.props.render({\n        inputs: this.inputs,\n        inputTypes: this.inputs.map(input => translateType(input.type)),\n        state: this.state,\n        handleInputChange: this.handleInputChange,\n        handleSubmit: this.handleSubmit,\n      });\n    }\n\n    // this.inputs.length = 1\n\n    return (\n      <form\n        className=\"pure-form pure-form-stacked\"\n        onSubmit={this.handleSubmit}\n      >\n        {this.inputs.map((input, index) => {\n          var inputType = translateType(input.type);\n          var inputLabel = this.props.labels\n            ? this.props.labels[index]\n            : input.name;\n          // check if input type is struct and if so loop out struct fields as well\n          let hideClass = '';\n          // if(index === 1) {\n          //   hideClass = \"hide\";\n          // }\n          return (\n            <input\n              className={hideClass}\n              key={input.name}\n              type={inputType}\n              name={input.name}\n              value={this.state[input.name]}\n              placeholder={inputLabel}\n              onChange={this.handleInputChange}\n            />\n          );\n        })}\n        <button\n          key=\"submit\"\n          className=\"pure-button\"\n          type=\"button\"\n          onClick={this.handleSubmit}\n        >\n          TWEET\n        </button>\n      </form>\n    );\n  }\n}\n\nTweetForm.contextTypes = {\n  drizzle: PropTypes.object,\n};\n\nTweetForm.propTypes = {\n  contract: PropTypes.string.isRequired,\n  method: PropTypes.string.isRequired,\n  sendArgs: PropTypes.object,\n  labels: PropTypes.arrayOf(PropTypes.string),\n  render: PropTypes.func,\n};\n\n/*\n * Export connected component.\n */\n\nconst mapStateToProps = state => {\n  return {\n    contracts: state.contracts,\n  };\n};\n\nexport default drizzleConnect(TweetForm, mapStateToProps);\n"]},"metadata":{},"sourceType":"module"}