{"ast":null,"code":"var _jsxFileName = \"/Users/tristan/Documents/blockchain/Real Twittor/App/src/MyComponent.js\";\nimport React from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ContractData, ContractForm } from 'drizzle-react-components';\nimport TweetForm from './TweetForm';\nimport SingleTweet from './SingleTweet';\nimport { Drizzle } from 'drizzle';\nimport options from './drizzleOptions';\nimport { DrizzleContext } from \"drizzle-react\"; // const drizzle = new Drizzle(options);\n\nexport default class tweets extends React.Component {\n  constructor(props, context) {\n    super(props);\n\n    this.handleInputChange = event => {\n      this.setState({\n        tweet: event.target.value,\n        hashT: this.findHashTag(event.target.value)\n      });\n      console.log(this.state);\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      await this.props.drizzle.contracts.Twittor.methods.addTweetStruct(this.state.tweet, this.state.hashT).send({\n        from: this.state.userAddress\n      }); //  this.forceUpdate();\n      //const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(this.state.userAddress).call();\n      //this.setState({numTweets });\n    };\n\n    this.getTweet = async index => {\n      console.log(\"props \", this.props);\n      const result = await this.props.drizzle.contracts.Twittor.methods.getEverythingTweetStruct(this.state.userAddress, index).call();\n      return result[0];\n    };\n\n    this.getNum = async index => {\n      console.log(\"props \", this.props);\n      const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(this.state.userAddress).call();\n      this.setState({\n        numTweets\n      });\n      console.log(\"numTweets\", numTweets);\n      this.forceUpdate();\n    };\n\n    this.drizzleState = context.drizzle; // this.contractInstance = context.drizzle.contracts.Twittor\n\n    this.state = {\n      userAddress: '',\n      tweet: \"\",\n      hashT: \"\",\n      numTweets: 0,\n      dataKey: null\n    };\n  }\n\n  async componentWillMount() {\n    // console.log(\"drizzle \", drizzle)\n    const _this$props = this.props,\n          drizzle = _this$props.drizzle,\n          drizzleState = _this$props.drizzleState;\n    const accounts = await this.props.drizzle.web3.eth.getAccounts(); // const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(accounts[0]).call();\n\n    drizzle.contracts.Twittor.methods.getNumTweets.cacheCall(accounts[0]);\n    let numTweets = 0; // console.log(\"numTweets \", numTweets)\n\n    this.setState({\n      userAddress: accounts[0]\n    }); // const contract = ;\n    // drizzle.contracts.Twittor.methods.getNumTweets.cacheCall(accounts[0])\n    // this.setState({dataKey});\n    // console.log(\"KEY \", dataKey)\n  }\n\n  findHashTag(str) {\n    return str.split(' ').filter(word => {\n      return word[0] === '#';\n    })[0];\n  }\n\n  render() {\n    const drizzleState = this.props.drizzleState;\n    let length = 0;\n    const key = Object.keys(drizzleState.contracts.Twittor.getNumTweets)[0];\n\n    if (drizzleState.contracts.Twittor.getNumTweets[key]) {\n      console.log(\"KEY \", key);\n      length = drizzleState.contracts.Twittor.getNumTweets[key].value;\n    } // const getNumTweetsFirstKey = Object.keys(\n    //   this.props.drizzleState.contracts.Twittor.getNumTweets\n    // )[1];\n    // if (this.props.drizzleState.contracts.Twittor.getNumTweets[getNumTweetsFirstKey]) {\n    //   length = this.props.drizzleState.contracts.Twittor.getNumTweets[getNumTweetsFirstKey].value;\n    // }\n\n\n    let mapArray = [];\n\n    if (length) {\n      mapArray.length = length;\n      mapArray.fill(1);\n    }\n\n    console.log(\"props\", this.props);\n    console.log(\"drizzleState>>>>\", this.props.drizzle.store.getState()); // console.log(\"contractInstance>>>>>\", this.contractInstance)\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, this.state.numTweets, \" \"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.getTweet,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"GET TWEET\"), React.createElement(\"button\", {\n      onClick: this.getNum,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"GET Numtweets\"), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"TWEETS\"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      key: \"tweet\",\n      name: \"tweet\",\n      value: this.state.tweet,\n      placeholder: \"tweet\",\n      onChange: this.handleInputChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"TWEET\")), React.createElement(\"div\", {\n      className: \"allTweets\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, mapArray.map((tweet, idx) => {\n      return React.createElement(SingleTweet, {\n        address: this.state.userAddress,\n        index: idx,\n        key: idx,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      });\n    }).reverse()), React.createElement(\"div\", {\n      className: \"hide\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/tristan/Documents/blockchain/Real Twittor/App/src/MyComponent.js"],"names":["React","ToastContainer","ContractData","ContractForm","TweetForm","SingleTweet","Drizzle","options","DrizzleContext","tweets","Component","constructor","props","context","handleInputChange","event","setState","tweet","target","value","hashT","findHashTag","console","log","state","handleSubmit","preventDefault","drizzle","contracts","Twittor","methods","addTweetStruct","send","from","userAddress","getTweet","index","result","getEverythingTweetStruct","call","getNum","numTweets","getNumTweets","forceUpdate","drizzleState","dataKey","componentWillMount","accounts","web3","eth","getAccounts","cacheCall","str","split","filter","word","render","length","key","Object","keys","mapArray","fill","store","getState","map","idx","reverse"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ContractData, ContractForm} from 'drizzle-react-components';\nimport TweetForm from './TweetForm';\nimport SingleTweet from './SingleTweet';\nimport { Drizzle } from 'drizzle';\nimport options from './drizzleOptions';\nimport { DrizzleContext } from \"drizzle-react\";\n\n// const drizzle = new Drizzle(options);\nexport default class tweets extends React.Component {\n  constructor(props, context) {\n    super(props);\n    this.drizzleState = context.drizzle\n    // this.contractInstance = context.drizzle.contracts.Twittor\n    this.state = { userAddress: '',\n    tweet: \"\",\n    hashT: \"\",\n    numTweets: 0,\n    dataKey: null\n  };\n\n  }\n  async componentWillMount() {\n    // console.log(\"drizzle \", drizzle)\n    const {drizzle, drizzleState} = this.props;\n\n    const accounts = await this.props.drizzle.web3.eth.getAccounts();\n    // const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(accounts[0]).call();\n    drizzle.contracts.Twittor.methods.getNumTweets.cacheCall(accounts[0])\n    \n    let numTweets = 0;\n    \n\n    // console.log(\"numTweets \", numTweets)\n    this.setState({ userAddress: accounts[0] });\n    // const contract = ;\n\n    // drizzle.contracts.Twittor.methods.getNumTweets.cacheCall(accounts[0])\n    // this.setState({dataKey});\n\n    // console.log(\"KEY \", dataKey)\n  }\n\n  handleInputChange = (event) => {\n    this.setState({\n      tweet: event.target.value,\n      hashT: this.findHashTag(event.target.value),\n    });\n    console.log(this.state);\n  }\n\n  handleSubmit = async (event) => {\n  event.preventDefault();\n\n\n  await this.props.drizzle.contracts.Twittor.methods.addTweetStruct(this.state.tweet, this.state.hashT).send({from: this.state.userAddress})\n\n  \n\n  //  this.forceUpdate();\n//const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(this.state.userAddress).call();\n//this.setState({numTweets });\n\n    \n}\n\n getTweet = async (index) => {\n  console.log(\"props \", this.props)\n  const result =  await this.props.drizzle.contracts.Twittor.methods.getEverythingTweetStruct(this.state.userAddress, index).call();\n  \n  return result[0];\n}\n\ngetNum = async (index) => {\n  console.log(\"props \", this.props)\n  const numTweets = await this.props.drizzle.contracts.Twittor.methods.getNumTweets(this.state.userAddress).call();\n  this.setState({numTweets})\n  console.log(\"numTweets\", numTweets);\n  this.forceUpdate();\n}\n\nfindHashTag(str) {\n  return str.split(' ').filter(word => {\n    return word[0] === '#';\n  })[0];\n}\n\n  render() {\n\n    const {drizzleState} = this.props;\n    let length = 0;\n\n    const key = Object.keys(drizzleState.contracts.Twittor.getNumTweets)[0]\n\n    if(drizzleState.contracts.Twittor.getNumTweets[key]){\n      console.log(\"KEY \", key)\n  \n      length = drizzleState.contracts.Twittor.getNumTweets[key].value;\n    }\n    // const getNumTweetsFirstKey = Object.keys(\n    //   this.props.drizzleState.contracts.Twittor.getNumTweets\n    // )[1];\n    // if (this.props.drizzleState.contracts.Twittor.getNumTweets[getNumTweetsFirstKey]) {\n    //   length = this.props.drizzleState.contracts.Twittor.getNumTweets[getNumTweetsFirstKey].value;\n    // }\n    let mapArray = [];\n    if (length) {\n      mapArray.length = length;\n      mapArray.fill(1);\n    }\n    \n\n    console.log(\"props\", this.props)\n    console.log(\"drizzleState>>>>\", this.props.drizzle.store.getState())\n    // console.log(\"contractInstance>>>>>\", this.contractInstance)\n    return (\n      <div className=\"App\">\n        <ToastContainer />\n        {<h1>{this.state.numTweets} </h1>}\n        <div>\n          <button onClick = {this.getTweet} >GET TWEET</button>\n          <button onClick = {this.getNum} >GET Numtweets</button>\n\n          <h1>TWEETS</h1>\n          <form onSubmit = {this.handleSubmit}>\n          <input\n              key=\"tweet\"\n              name=\"tweet\"\n              value={this.state.tweet}\n              placeholder=\"tweet\"\n              onChange={this.handleInputChange}\n            />\n            <button type=\"submit\">TWEET</button>\n          </form>\n          {/* <TweetForm contract=\"Twittor\" method=\"addTweetStruct\" store = {this.props.drizzle}/> */}\n          <div className=\"allTweets\">\n            {mapArray\n              .map((tweet, idx) => {\n                return (\n                  <SingleTweet\n                    address={this.state.userAddress}\n                    index={idx}\n                    key={idx}\n                  />\n                );\n              })\n              .reverse()}\n          </div>\n          <div className=\"hide\">\n            {/* {\n              <ContractData\n                contract=\"Twittor\"\n                method=\"getNumTweets\"\n                methodArgs={[this.state.userAddress]}\n              />\n            } */}\n          </div>\n\n          {/* (\n  <DrizzleContext.Consumer>\n    {drizzleContext => {\n      const { drizzle, drizzleState, initialized } = drizzleContext;\n  \n      if (!initialized) {\n        return \"Loading...\";\n      }\n\n      return (\n      <div>\n      <TweetForm drizzle = {drizzle} drizzleState = {drizzleState} />\n      </div>\n\n      );\n    }}\n  </DrizzleContext.Consumer>\n) */}\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}